<html>

<head>
<meta charset="utf-8">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<style>
.mdl-layout {
	align-items: center;
  justify-content: center;
}
.mdl-layout__content {
	padding: 24px;
	flex: none;
}
</style>

</head>

<div class="mdl-layout mdl-js-layout mdl-color--grey-100">
	<main class="mdl-layout__content">
		<div class="mdl-card mdl-shadow--6dp">
			<div class="mdl-card__title mdl-color--primary mdl-color-text--white">
				<h2 class="mdl-card__title-text">Aog login page</h2>
			</div>
	  	<div class="mdl-card__supporting-text">
				<form action='/login' method='post' id='loginform'>
					<div class="mdl-textfield mdl-js-textfield">
						<input class="mdl-textfield__input" type="text" id="username" />
						<label class="mdl-textfield__label" for="username">Username</label>
					</div>
					<div class="mdl-textfield mdl-js-textfield">
						<input class="mdl-textfield__input" type="password" id="userpass" />
						<label class="mdl-textfield__label" for="userpass">Password</label>
					</div>
                    
                        <input type="hidden" name="redirect">
                        <input type="hidden" name="client_id">
                        <input type="hidden" name="redirect_uri">
                        <input type="hidden" name="state" />
                        <input type="hidden" name="username">
                        <input type="hidden" name="password" />
				</form>
			</div>
			<div class="mdl-card__actions mdl-card--border mdl-typography--text-right">
				<button class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" OnClick="formSubmit()">Log in</button>
			</div>
		</div>
	</main>
</div>

	<script>
        function getUrlParameters () {
            // Get each parameter
            let query = window.location.search.substr(1);
            // Split each parameter into a key-value pair
            let keyValues = query.split('&');
            let parameterMap = new Map();
            for (let i in keyValues) {
                // Split into <key>=<value>
                let param = keyValues[i];
                let splitParam = param.split('=');
                parameterMap.set(splitParam[0], splitParam[1]);
            }
            return parameterMap;
        }

        function formSubmit () {
            console.log(1);
            // Get URL parameters
            let params = getUrlParameters();
            // Set each hidden input from a value obtained from the URL
            document.querySelector('[name="redirect"]').value = params.get('redirect');
            document.querySelector('[name="redirect_uri"]').value = params.get('redirect_uri');
            document.querySelector('[name="client_id"]').value = params.get('client_id');
            document.querySelector('[name="state"]').value = params.get('state');
            document.querySelector('[name="username"]').value = document.querySelector('input[id="username"]').value;
            document.querySelector('[name="password"]').value = document.querySelector('input[id="userpass"]').value;
            document.querySelector('#loginform').submit();
        }
    </script> 
	
</html>